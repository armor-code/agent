# ArmorCode Metrics Shipper Configuration
# This file contains environment variables for the metrics shipper service
# Location: /etc/armorcode/metrics_shipper.env
# Permissions: 600 (readable only by root and armorcode user)

# ============================================================================
# DataDog Configuration (REQUIRED)
# ============================================================================

# DataDog API Key - Get from DataDog console
# https://app.datadoghq.com/organization-settings/api-keys
DATADOG_API_KEY=your_datadog_api_key_here

# DataDog Application Key - Get from DataDog console
# https://app.datadoghq.com/organization-settings/application-keys
DATADOG_APP_KEY=your_datadog_app_key_here

# DataDog Site (change based on your region)
# Options: datadoghq.com (US1), datadoghq.eu (EU1), us3.datadoghq.com (US3), etc.
DATADOG_SITE=datadoghq.com

# ============================================================================
# Metrics Source Configuration
# ============================================================================

# Directory where worker metrics files are stored
METRICS_DIR=/tmp/armorcode/log/metrics

# Pattern for metrics files to monitor
# Default: metrics*.json (matches metrics_prod.json, metrics_1.json, etc.)
METRICS_PATTERN=metrics*.json

# ============================================================================
# Batch Processing Configuration
# ============================================================================

# Maximum number of metrics to batch before sending to DataDog
# Higher values = fewer API calls but higher memory usage
# Recommended: 50-200
BATCH_SIZE=100

# Maximum time (in seconds) to wait before flushing batch
# Lower values = lower latency but more API calls
# Recommended: 3-10
BATCH_TIMEOUT_SEC=5

# ============================================================================
# Health Check Configuration
# ============================================================================

# Port for health check HTTP endpoint
# Health check URL: http://localhost:9090/health
HEALTH_CHECK_PORT=9090

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level for the shipper service
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# State Management
# ============================================================================

# File to store shipper state (position tracking)
# This file persists read positions to prevent duplicate metric submissions
STATE_FILE=/var/lib/armorcode/shipper_state.json
